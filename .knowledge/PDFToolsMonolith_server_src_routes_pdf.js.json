{"is_source_file": true, "format": "JavaScript", "description": "This file defines Express.js route handlers for PDF operations such as creation, compression, merging, splitting, and downloading. It manages API endpoints for PDF processing and handles authentication and file management via utility and service modules.", "external_files": ["../utils/fsutil.js", "../services/pdfService.js", "../services/history.js", "../services/logs.js"], "external_methods": ["createPdfFromText", "compressPdf", "mergePdfs", "splitPdf", "recordFileHistory", "addLog"], "published": ["router"], "classes": [], "methods": [{"name": "signDownload(filePath, ttlHours = 24)", "description": "Creates a signed download token for a file with an expiration time.", "scope": "", "scopeKind": ""}], "calls": ["express.Router", "multer({...})", "fs.stat", "path.basename", "dayjs()", "dayjs().add()", "crypto.randomBytes()", "createPdfFromText()", "compressPdf()", "mergePdfs()", "splitPdf()", "recordFileHistory()", "addLog()", "res.download()", "downloadTokens.set()", "downloadTokens.has()", "downloadTokens.get()", "downloadTokens.delete()"], "search-terms": ["pdf creation API", "pdf compression route", "pdf merging endpoint", "pdf splitting API", "download token signing", "file processing routes", "PDF utility functions", "Express PDF routes"], "state": 2, "file_id": 24, "knowledge_revision": 48, "git_revision": "", "ctags": [{"_type": "tag", "name": "downloadTokens", "path": "/home/kavia/workspace/code-generation/pdf-tools-12948-12989/PDFToolsMonolith/server/src/routes/pdf.js", "pattern": "/^const downloadTokens = new Map();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/pdf-tools-12948-12989/PDFToolsMonolith/server/src/routes/pdf.js", "pattern": "/^const router = express.Router();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "signDownload", "path": "/home/kavia/workspace/code-generation/pdf-tools-12948-12989/PDFToolsMonolith/server/src/routes/pdf.js", "pattern": "/^function signDownload(filePath, ttlHours = 24) {$/", "language": "JavaScript", "kind": "function", "signature": "(filePath, ttlHours = 24)"}, {"_type": "tag", "name": "upload", "path": "/home/kavia/workspace/code-generation/pdf-tools-12948-12989/PDFToolsMonolith/server/src/routes/pdf.js", "pattern": "/^const upload = multer({$/", "language": "JavaScript", "kind": "constant"}], "hash": "688ea7deef36957d025b9d390bc237da", "format-version": 4, "code-base-name": "PDFToolsMonolith", "filename": "PDFToolsMonolith/server/src/routes/pdf.js", "revision_history": [{"48": ""}]}